<mxfile host="app.diagrams.net" modified="2023-10-25T07:30:16.301Z" agent="Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/86.0.4240.198 Safari/537.36" etag="e5C322NZSsf77IBQeABx" version="21.5.2" type="github">
  <diagram name="第 1 页" id="3tS3NE0jxbSOC0BookcE">
    <mxGraphModel dx="1674" dy="764" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="2339" pageHeight="3300" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-3" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=13;" parent="1" source="ZRNS-KBWd8ZVCZ68WGnK-1" target="ZRNS-KBWd8ZVCZ68WGnK-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-1" value="客户端" style="ellipse;whiteSpace=wrap;html=1;fontSize=13;" parent="1" vertex="1">
          <mxGeometry x="100" y="85" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-5" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=13;" parent="1" source="ZRNS-KBWd8ZVCZ68WGnK-2" target="ZRNS-KBWd8ZVCZ68WGnK-4" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-2" value="建立socket" style="whiteSpace=wrap;html=1;fontSize=13;" parent="1" vertex="1">
          <mxGeometry x="100" y="205" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-7" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=13;" parent="1" source="ZRNS-KBWd8ZVCZ68WGnK-4" target="ZRNS-KBWd8ZVCZ68WGnK-6" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-47" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Verdana;fontSize=13;" parent="1" source="ZRNS-KBWd8ZVCZ68WGnK-4" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="430" y="515" as="targetPoint" />
            <Array as="points">
              <mxPoint x="410" y="515" />
              <mxPoint x="410" y="515" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-4" value="connect，尝试与服务器进行连接" style="whiteSpace=wrap;html=1;fontSize=13;" parent="1" vertex="1">
          <mxGeometry x="100" y="485" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-9" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=13;" parent="1" source="ZRNS-KBWd8ZVCZ68WGnK-6" target="ZRNS-KBWd8ZVCZ68WGnK-8" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-51" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Verdana;fontSize=13;" parent="1" source="ZRNS-KBWd8ZVCZ68WGnK-6" target="ZRNS-KBWd8ZVCZ68WGnK-44" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-6" value="send发送信息给服务器" style="whiteSpace=wrap;html=1;fontSize=13;" parent="1" vertex="1">
          <mxGeometry x="100" y="655" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-58" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Verdana;fontSize=13;" parent="1" source="ZRNS-KBWd8ZVCZ68WGnK-8" target="ZRNS-KBWd8ZVCZ68WGnK-57" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-8" value="read接受服务器返回的信息" style="whiteSpace=wrap;html=1;fontSize=13;" parent="1" vertex="1">
          <mxGeometry x="100" y="755" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-12" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=13;" parent="1" source="ZRNS-KBWd8ZVCZ68WGnK-10" target="ZRNS-KBWd8ZVCZ68WGnK-11" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-10" value="服务器" style="ellipse;whiteSpace=wrap;html=1;fontSize=13;" parent="1" vertex="1">
          <mxGeometry x="370" y="85" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-14" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=13;" parent="1" source="ZRNS-KBWd8ZVCZ68WGnK-11" target="ZRNS-KBWd8ZVCZ68WGnK-13" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-11" value="建立socket" style="whiteSpace=wrap;html=1;fontSize=13;" parent="1" vertex="1">
          <mxGeometry x="370" y="205" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-16" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=13;" parent="1" source="ZRNS-KBWd8ZVCZ68WGnK-13" target="ZRNS-KBWd8ZVCZ68WGnK-15" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-13" value="bind" style="whiteSpace=wrap;html=1;fontSize=13;" parent="1" vertex="1">
          <mxGeometry x="370" y="315" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-37" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=13;" parent="1" source="ZRNS-KBWd8ZVCZ68WGnK-15" target="ZRNS-KBWd8ZVCZ68WGnK-36" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="430" y="495" />
              <mxPoint x="430" y="495" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-15" value="accept,阻塞在accept，等待客户连接" style="whiteSpace=wrap;html=1;fontSize=13;" parent="1" vertex="1">
          <mxGeometry x="370" y="425" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-32" value="客户端发起连接" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=13;" parent="1" vertex="1">
          <mxGeometry x="250" y="515" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-40" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=13;" parent="1" source="ZRNS-KBWd8ZVCZ68WGnK-36" target="ZRNS-KBWd8ZVCZ68WGnK-44" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="430" y="675" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-36" value="得到client连接的connfd，处理该connfd发送的内容" style="whiteSpace=wrap;html=1;fontSize=13;" parent="1" vertex="1">
          <mxGeometry x="370" y="545" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-46" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Verdana;fontSize=13;" parent="1" source="ZRNS-KBWd8ZVCZ68WGnK-44" target="ZRNS-KBWd8ZVCZ68WGnK-45" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-44" value="read，读取客户发过来的信息" style="rounded=0;whiteSpace=wrap;html=1;fontFamily=Verdana;fontSize=13;" parent="1" vertex="1">
          <mxGeometry x="370" y="655" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-52" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;fontFamily=Verdana;fontSize=13;" parent="1" source="ZRNS-KBWd8ZVCZ68WGnK-45" target="ZRNS-KBWd8ZVCZ68WGnK-8" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-56" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Verdana;fontSize=13;" parent="1" source="ZRNS-KBWd8ZVCZ68WGnK-45" target="ZRNS-KBWd8ZVCZ68WGnK-55" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-45" value="send，将客户发过来的信息，处理后发回去" style="whiteSpace=wrap;html=1;fontFamily=Verdana;rounded=0;fontSize=13;" parent="1" vertex="1">
          <mxGeometry x="370" y="755" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-49" value="三次握手的发生" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontFamily=Verdana;fontSize=13;" parent="1" vertex="1">
          <mxGeometry x="250" y="485" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-50" value="连接成功" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontFamily=Verdana;fontSize=13;" parent="1" vertex="1">
          <mxGeometry x="155" y="575" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-53" value="客户端发送数据" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontFamily=Verdana;fontSize=13;" parent="1" vertex="1">
          <mxGeometry x="235" y="655" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-54" value="客户端接收数据" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontFamily=Verdana;fontSize=13;" parent="1" vertex="1">
          <mxGeometry x="235" y="755" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-55" value="close socket,关闭socket" style="whiteSpace=wrap;html=1;fontFamily=Verdana;rounded=0;fontSize=13;" parent="1" vertex="1">
          <mxGeometry x="370" y="865" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-57" value="close socket,关闭socket" style="whiteSpace=wrap;html=1;fontSize=13;" parent="1" vertex="1">
          <mxGeometry x="100" y="865" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-59" value="TCP简单的服务器和客户端" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontFamily=Verdana;fontSize=13;" parent="1" vertex="1">
          <mxGeometry x="215" y="60" width="180" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-74" value="" style="endArrow=none;html=1;rounded=0;fontFamily=Verdana;fontSize=13;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="40" y="960" as="sourcePoint" />
            <mxPoint x="40" y="960" as="targetPoint" />
            <Array as="points">
              <mxPoint x="40" y="40" />
              <mxPoint x="600" y="40" />
              <mxPoint x="600" y="960" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-82" value="UDP简单的服务器和客户端" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontFamily=Verdana;fontSize=13;" parent="1" vertex="1">
          <mxGeometry x="885" y="60" width="180" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-87" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Verdana;fontSize=13;" parent="1" source="ZRNS-KBWd8ZVCZ68WGnK-84" target="ZRNS-KBWd8ZVCZ68WGnK-86" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-84" value="客户端" style="ellipse;whiteSpace=wrap;html=1;fontSize=13;" parent="1" vertex="1">
          <mxGeometry x="780" y="85" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-89" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Verdana;fontSize=13;" parent="1" source="ZRNS-KBWd8ZVCZ68WGnK-85" target="ZRNS-KBWd8ZVCZ68WGnK-88" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-85" value="服务器" style="ellipse;whiteSpace=wrap;html=1;fontSize=13;" parent="1" vertex="1">
          <mxGeometry x="1050" y="85" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-102" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Verdana;fontSize=13;" parent="1" source="ZRNS-KBWd8ZVCZ68WGnK-86" target="ZRNS-KBWd8ZVCZ68WGnK-101" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-86" value="建立socket" style="whiteSpace=wrap;html=1;fontSize=13;" parent="1" vertex="1">
          <mxGeometry x="780" y="205" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-93" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Verdana;fontSize=13;" parent="1" source="ZRNS-KBWd8ZVCZ68WGnK-88" target="ZRNS-KBWd8ZVCZ68WGnK-92" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-88" value="建立socket" style="whiteSpace=wrap;html=1;fontSize=13;" parent="1" vertex="1">
          <mxGeometry x="1050" y="205" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-96" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Verdana;fontSize=13;" parent="1" source="ZRNS-KBWd8ZVCZ68WGnK-92" target="ZRNS-KBWd8ZVCZ68WGnK-95" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-92" value="bind" style="whiteSpace=wrap;html=1;fontSize=13;" parent="1" vertex="1">
          <mxGeometry x="1050" y="315" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-98" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Verdana;fontSize=13;" parent="1" source="ZRNS-KBWd8ZVCZ68WGnK-95" target="ZRNS-KBWd8ZVCZ68WGnK-97" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-95" value="recvfrom接收客户端信息" style="whiteSpace=wrap;html=1;fontSize=13;" parent="1" vertex="1">
          <mxGeometry x="1050" y="655" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-110" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;fontFamily=Verdana;fontSize=13;" parent="1" source="ZRNS-KBWd8ZVCZ68WGnK-97" target="ZRNS-KBWd8ZVCZ68WGnK-106" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-97" value="sendto，将处理后的信息发送回去给客户端" style="whiteSpace=wrap;html=1;fontSize=13;" parent="1" vertex="1">
          <mxGeometry x="1050" y="755" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-103" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontFamily=Verdana;fontSize=13;" parent="1" target="ZRNS-KBWd8ZVCZ68WGnK-95" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="900" y="654.9999999999998" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="900" y="685" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-107" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Verdana;startArrow=none;fontSize=13;" parent="1" source="ZRNS-KBWd8ZVCZ68WGnK-101" target="ZRNS-KBWd8ZVCZ68WGnK-106" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="840" y="684.9999999999998" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-109" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Verdana;fontSize=13;" parent="1" source="ZRNS-KBWd8ZVCZ68WGnK-106" target="ZRNS-KBWd8ZVCZ68WGnK-108" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-106" value="recvfrom接收服务器端信息" style="whiteSpace=wrap;html=1;fontSize=13;" parent="1" vertex="1">
          <mxGeometry x="780" y="755" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-108" value="close()关闭socket" style="whiteSpace=wrap;html=1;fontSize=13;" parent="1" vertex="1">
          <mxGeometry x="780" y="865" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-101" value="sendto，主动发送消息给服务器" style="whiteSpace=wrap;html=1;fontSize=13;" parent="1" vertex="1">
          <mxGeometry x="780" y="655" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-112" value="" style="endArrow=none;html=1;rounded=0;fontFamily=Verdana;fontSize=13;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="680" y="960" as="sourcePoint" />
            <mxPoint x="680" y="960" as="targetPoint" />
            <Array as="points">
              <mxPoint x="680" y="40" />
              <mxPoint x="1240" y="40" />
              <mxPoint x="1240" y="960" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-114" value="相比左边就是少了一个三次连接过程，&lt;br style=&quot;font-size: 13px;&quot;&gt;服务器accept，客户端connect，&lt;br style=&quot;font-size: 13px;&quot;&gt;然后建立3次连接" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontFamily=Verdana;fontSize=13;" parent="1" vertex="1">
          <mxGeometry x="855" y="455" width="240" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-121" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Verdana;fontSize=13;" parent="1" source="ZRNS-KBWd8ZVCZ68WGnK-119" target="ZRNS-KBWd8ZVCZ68WGnK-120" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-119" value="listenfd建立" style="ellipse;whiteSpace=wrap;html=1;fontFamily=Verdana;fontSize=13;" parent="1" vertex="1">
          <mxGeometry x="1400" y="180" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-123" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Verdana;fontSize=13;" parent="1" source="ZRNS-KBWd8ZVCZ68WGnK-120" target="ZRNS-KBWd8ZVCZ68WGnK-122" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-120" value="socket" style="whiteSpace=wrap;html=1;fontSize=13;fontFamily=Verdana;" parent="1" vertex="1">
          <mxGeometry x="1400" y="300" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-125" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Verdana;fontSize=13;" parent="1" source="ZRNS-KBWd8ZVCZ68WGnK-122" target="ZRNS-KBWd8ZVCZ68WGnK-124" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-122" value="bind" style="whiteSpace=wrap;html=1;fontSize=13;fontFamily=Verdana;" parent="1" vertex="1">
          <mxGeometry x="1400" y="400" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-124" value="listen" style="whiteSpace=wrap;html=1;fontSize=13;fontFamily=Verdana;" parent="1" vertex="1">
          <mxGeometry x="1400" y="500" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-127" value="" style="endArrow=none;html=1;rounded=0;fontFamily=Verdana;fontSize=13;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1360" y="160" as="sourcePoint" />
            <mxPoint x="1360" y="160" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1360" y="600" />
              <mxPoint x="1880" y="600" />
              <mxPoint x="1880" y="410" />
              <mxPoint x="1880" y="160" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-143" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" target="ZRNS-KBWd8ZVCZ68WGnK-146" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="240" y="1120" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-144" value="SELECT" style="ellipse;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="180" y="1050" width="120" height="70" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-145" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="ZRNS-KBWd8ZVCZ68WGnK-146" target="ZRNS-KBWd8ZVCZ68WGnK-148" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-146" value="listenfd建立" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="180" y="1160" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-147" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="ZRNS-KBWd8ZVCZ68WGnK-148" target="ZRNS-KBWd8ZVCZ68WGnK-151" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-148" value="select函数阻塞，监听listenfd和connfd" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="180" y="1270" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-149" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="ZRNS-KBWd8ZVCZ68WGnK-151" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="240" y="1500" as="targetPoint" />
            <Array as="points">
              <mxPoint x="240" y="1470" />
              <mxPoint x="240" y="1470" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-150" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="ZRNS-KBWd8ZVCZ68WGnK-151" target="ZRNS-KBWd8ZVCZ68WGnK-155" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="420" y="1410" />
            </Array>
            <mxPoint x="420" y="1480" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-151" value="是否为新连接，即触发的的listenfd还是connfd" style="rhombus;whiteSpace=wrap;html=1;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="180" y="1370" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-152" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="240" y="1250" as="targetPoint" />
            <Array as="points">
              <mxPoint x="120" y="1650" />
              <mxPoint x="120" y="1250" />
            </Array>
            <mxPoint x="180" y="1650" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-153" value="将新连接添加到connfd" style="whiteSpace=wrap;html=1;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="180" y="1620" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-154" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="ZRNS-KBWd8ZVCZ68WGnK-155" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="240" y="1250" as="targetPoint" />
            <Array as="points">
              <mxPoint x="420" y="1630" />
              <mxPoint x="520" y="1630" />
              <mxPoint x="520" y="1250" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-155" value="处理connfd发送过来的消息" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="360" y="1500" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-156" value="是" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="240.00000000000006" y="1450" width="40" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-157" value="否" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="300.00000000000006" y="1380" width="40" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-161" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontFamily=Verdana;fontSize=13;" parent="1" source="ZRNS-KBWd8ZVCZ68WGnK-160" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="240" y="1620" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-160" value="Accept函数获取，connfd" style="rounded=0;whiteSpace=wrap;html=1;fontFamily=Verdana;fontSize=13;" parent="1" vertex="1">
          <mxGeometry x="180" y="1500" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-162" value="&lt;div style=&quot;line-height: 1.75; font-size: 14px; text-align: left;&quot;&gt;成功则是非负描述符sockfd，&lt;/div&gt;&lt;div style=&quot;line-height: 1.75; font-size: 14px; text-align: left;&quot;&gt;表示协议簇和具体协议，比如TCP和UDP&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=13;fontFamily=Verdana;" parent="1" vertex="1">
          <mxGeometry x="1530" y="300" width="280" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-163" value="&lt;div style=&quot;line-height: 1.75; font-size: 14px; text-align: left;&quot;&gt;该函数用于绑定特定的端口；&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=13;fontFamily=Verdana;" parent="1" vertex="1">
          <mxGeometry x="1530" y="400" width="210" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-164" value="&lt;div style=&quot;line-height: 1.75; font-size: 14px; text-align: left;&quot;&gt;socket创建的套接字默认是主动套接字&lt;/div&gt;&lt;div style=&quot;line-height: 1.75; font-size: 14px; text-align: left;&quot;&gt;(即将调用connect链接别人)；&lt;/div&gt;&lt;div style=&quot;line-height: 1.75; font-size: 14px; text-align: left;&quot;&gt;listen将主动套接字转为被动套接字(等待被链接);&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=13;fontFamily=Verdana;" parent="1" vertex="1">
          <mxGeometry x="1530" y="485" width="330" height="90" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-166" value="Listenfd的建立过程" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=13;fontFamily=Verdana;" parent="1" vertex="1">
          <mxGeometry x="1530" y="190" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-169" value="" style="endArrow=classic;html=1;rounded=0;fontFamily=Verdana;fontSize=13;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1459.5" y="600" as="sourcePoint" />
            <mxPoint x="1459.5" y="660" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-171" value="&lt;br&gt;&lt;div style=&quot;line-height: 1.75; font-size: 14px; text-align: left;&quot;&gt;accept仅由TCP服务器调用；&lt;/div&gt;&lt;div style=&quot;line-height: 1.75; font-size: 14px; text-align: left;&quot;&gt;该函数在没有新连接进来的时候是睡眠状态，&lt;/div&gt;&lt;div style=&quot;line-height: 1.75; font-size: 14px; text-align: left;&quot;&gt;当有连接才会跳出阻塞；&lt;/div&gt;&lt;div style=&quot;line-height: 1.75; font-size: 14px; text-align: left;&quot;&gt;返回值是：返回值：成功非负描述符connfd，失败-1；&lt;/div&gt;&lt;div style=&quot;line-height: 1.75; font-size: 14px; text-align: left;&quot;&gt;connfd表示与客户端的TCP链接；表示&quot;已链接套接字&quot;；&lt;/div&gt;&lt;div style=&quot;line-height: 1.75; font-size: 14px; text-align: left;&quot;&gt;返回了就说明完成了TCP的三次握手；&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=13;fontFamily=Verdana;" parent="1" vertex="1">
          <mxGeometry x="1530" y="605" width="380" height="180" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-172" value="" style="endArrow=none;html=1;rounded=0;fontFamily=Verdana;fontSize=13;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1320" y="40" as="sourcePoint" />
            <mxPoint x="1320" y="40" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1320" y="960" />
              <mxPoint x="1960" y="960" />
              <mxPoint x="1960" y="40" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-174" value="Accept" style="whiteSpace=wrap;html=1;fontSize=13;fontFamily=Verdana;" parent="1" vertex="1">
          <mxGeometry x="1400" y="660" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-175" value="相关函数的介绍" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=13;fontFamily=Verdana;" parent="1" vertex="1">
          <mxGeometry x="1560" y="85" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ZRNS-KBWd8ZVCZ68WGnK-177" value="" style="endArrow=none;html=1;rounded=0;fontFamily=Verdana;fontSize=13;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="40" y="1040" as="sourcePoint" />
            <mxPoint x="40" y="1040" as="targetPoint" />
            <Array as="points">
              <mxPoint x="40" y="2040" />
              <mxPoint x="800" y="2040" />
              <mxPoint x="800" y="1040" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="1raRozILUYv7EW11ZRnK-1" value="备注：&lt;br&gt;1.selec函数：&lt;br&gt;&lt;div style=&quot;line-height: 1.75; font-size: 14px; text-align: left;&quot;&gt;int select(int maxfdp1, fd_set* readset, fd_set* writeset, fd_set* exceptset,const struct timeval* timeout);&lt;/div&gt;&lt;div style=&quot;line-height: 1.75; font-size: 14px; text-align: left;&quot;&gt;readset是表示该描述符可读；一般只要这个就够了，表示对端发来信息，这边可以读取;即可以进行read&lt;/div&gt;&lt;div style=&quot;line-height: 1.75; font-size: 14px; text-align: left;&quot;&gt;writeset是表示该描述符可写；这个就是可以对该描述符进行write();&lt;/div&gt;&lt;div style=&quot;line-height: 1.75; font-size: 14px; text-align: left;&quot;&gt;exceptset是表示该描述符读写异常;&lt;/div&gt;&lt;div style=&quot;line-height: 1.75; font-size: 14px; text-align: left;&quot;&gt;上述参数为NULL则表示不检测该项目&lt;/div&gt;&lt;div style=&quot;line-height: 1.75; font-size: 14px; text-align: left;&quot;&gt;timteout是如果在该时间内，如果上述条件没有触发，则return 0;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=default;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="80" y="1770" width="660" height="190" as="geometry" />
        </mxCell>
        <mxCell id="D4SJSjXEe5XZ6iG6mVD0-7" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" target="D4SJSjXEe5XZ6iG6mVD0-6" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1140" y="1120" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="D4SJSjXEe5XZ6iG6mVD0-2" value="POLL" style="ellipse;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1080" y="1050" width="120" height="70" as="geometry" />
        </mxCell>
        <mxCell id="D4SJSjXEe5XZ6iG6mVD0-9" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="D4SJSjXEe5XZ6iG6mVD0-6" target="D4SJSjXEe5XZ6iG6mVD0-8" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="D4SJSjXEe5XZ6iG6mVD0-6" value="listenfd建立" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1080" y="1160" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="D4SJSjXEe5XZ6iG6mVD0-14" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="D4SJSjXEe5XZ6iG6mVD0-8" target="D4SJSjXEe5XZ6iG6mVD0-13" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="D4SJSjXEe5XZ6iG6mVD0-8" value="POLL函数阻塞" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1080" y="1270" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="D4SJSjXEe5XZ6iG6mVD0-16" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="D4SJSjXEe5XZ6iG6mVD0-13" target="D4SJSjXEe5XZ6iG6mVD0-15" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="D4SJSjXEe5XZ6iG6mVD0-21" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="D4SJSjXEe5XZ6iG6mVD0-13" target="D4SJSjXEe5XZ6iG6mVD0-20" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="D4SJSjXEe5XZ6iG6mVD0-13" value="是否为新连接，即触发的的listenfd还是connfd" style="rhombus;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1080" y="1370" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="D4SJSjXEe5XZ6iG6mVD0-18" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="D4SJSjXEe5XZ6iG6mVD0-15" target="D4SJSjXEe5XZ6iG6mVD0-17" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="D4SJSjXEe5XZ6iG6mVD0-15" value="Accept函数获取，connfd" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1080" y="1500" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="D4SJSjXEe5XZ6iG6mVD0-19" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="D4SJSjXEe5XZ6iG6mVD0-17" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1140" y="1240" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1000" y="1650" />
              <mxPoint x="1000" y="1240" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="D4SJSjXEe5XZ6iG6mVD0-17" value="将connfd添加到" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1080" y="1620" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="D4SJSjXEe5XZ6iG6mVD0-22" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="D4SJSjXEe5XZ6iG6mVD0-20" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1140" y="1240" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1320" y="1660" />
              <mxPoint x="1440" y="1660" />
              <mxPoint x="1440" y="1240" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="D4SJSjXEe5XZ6iG6mVD0-20" value="处理connfd&lt;br&gt;发送过来的消息" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1260" y="1500" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="D4SJSjXEe5XZ6iG6mVD0-23" value="" style="endArrow=none;html=1;rounded=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="960" y="1040" as="sourcePoint" />
            <mxPoint x="960" y="1040" as="targetPoint" />
            <Array as="points">
              <mxPoint x="960" y="2040" />
              <mxPoint x="1840" y="2040" />
              <mxPoint x="1840" y="1040" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="D4SJSjXEe5XZ6iG6mVD0-24" value="&lt;div style=&quot;line-height: 1.75; font-size: 14px; text-align: left;&quot;&gt;int poll(struct pollfd* fdarray, unsigned long nfds, int timeout);&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 1.75; font-size: 14px; text-align: left;&quot;&gt;pollfd就是监听描述符的指针，nfds就是该指针的个数；&lt;/div&gt;&lt;div style=&quot;line-height: 1.75; font-size: 14px; text-align: left;&quot;&gt;&lt;div style=&quot;line-height: 1.75;&quot;&gt;我们需要记住 poll 识别三类数据：普通、优先级带、高优先级。&lt;/div&gt;&lt;div style=&quot;line-height: 1.75;&quot;&gt;poll数据有：&lt;/div&gt;&lt;div style=&quot;line-height: 1.75;&quot;&gt; &lt;span style=&quot;white-space: pre;&quot;&gt; &lt;/span&gt;普通数据：所有正规TCP数据和所有UDP数据都被认为是普通数据。&lt;/div&gt;&lt;div style=&quot;line-height: 1.75;&quot;&gt;&lt;span style=&quot;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt; &lt;/span&gt;优先级带数据：TCP的带外数据被认为是优先级带数据&lt;/div&gt;&lt;div style=&quot;line-height: 1.75;&quot;&gt;&lt;span style=&quot;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt; &lt;/span&gt;高优先级数据：TCP的带外数据&lt;/div&gt;&lt;div style=&quot;line-height: 1.75;&quot;&gt;TCP的带外数据:&lt;/div&gt;&lt;div style=&quot;line-height: 1.75;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt; &lt;/span&gt;也叫加速数据，许多的传输层都具有带外数据(也就是经加速数据)的概念，&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 1.75;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt; &lt;/span&gt;想法就是连端发生了重要的事情，希望迅速的通知给对端。这里的迅速是指这种通知应该在已经排队了的带内数据之前发送。&lt;/div&gt;&lt;div style=&quot;line-height: 1.75;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt; &lt;/span&gt;也就是说，带外数据具有更高的优先级。带外数据不要求再启动一个连接进行传输，而是使用已有的连接进行传输。&lt;/div&gt;&lt;div style=&quot;line-height: 1.75;&quot;&gt;TCP的带内数据:&lt;/div&gt;&lt;div style=&quot;line-height: 1.75;&quot;&gt;&lt;span style=&quot;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt; &lt;/span&gt;带内数据就是我们平常传输或者说是口头叫的数据&lt;/div&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=default;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="970" y="1690" width="820" height="330" as="geometry" />
        </mxCell>
        <mxCell id="EbPVi9HCwBS56in5SvdU-2" value="int select(int maxfdp1, &lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt; &lt;/span&gt;fd_set* readset,&lt;br&gt;&amp;nbsp;&lt;span style=&quot;white-space: pre;&quot;&gt; &lt;/span&gt;fd_set* writeset, &lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt; &lt;/span&gt;fd_set* exceptset,&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt; &lt;/span&gt;const struct timeval* timeout);" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;labelBorderColor=default;" parent="1" vertex="1">
          <mxGeometry x="310" y="1260" width="210" height="90" as="geometry" />
        </mxCell>
        <mxCell id="EbPVi9HCwBS56in5SvdU-3" value="&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;此处只对readset进行举例说明：&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;fdset是 int32 fd[128];&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;也就是128个字节，一共128*8 = 1024个bit；&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;一共检测这么多个，要检测哪个fd就将该bit位置1&lt;br&gt;看一共可以检测多少，sizeof(fd_set)*8即可&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=default;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="360" y="1140" width="280" height="90" as="geometry" />
        </mxCell>
        <mxCell id="EbPVi9HCwBS56in5SvdU-4" value="&lt;span style=&quot;color: rgb(0, 0, 0); font-family: Helvetica; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(251, 251, 251); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; float: none; display: inline !important;&quot;&gt;int poll(&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt; &lt;/span&gt;struct pollfd* fdarray, &lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt; &lt;/span&gt;unsigned long nfds, &lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt; &lt;/span&gt;int timeout);&lt;/span&gt;" style="text;whiteSpace=wrap;html=1;labelBorderColor=default;align=left;" parent="1" vertex="1">
          <mxGeometry x="1235" y="1265" width="170" height="80" as="geometry" />
        </mxCell>
        <mxCell id="xfP30E8PO_quScPlo0MI-3" value="SELECT监听数量是有限制的" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=#b85450;fillColor=#f8cecc;" parent="1" vertex="1">
          <mxGeometry x="360" y="1080" width="180" height="30" as="geometry" />
        </mxCell>
        <mxCell id="xfP30E8PO_quScPlo0MI-4" value="POLL监听的fd数量是没有数量限制的" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=#b85450;fillColor=#f8cecc;" parent="1" vertex="1">
          <mxGeometry x="1520" y="1080" width="220" height="30" as="geometry" />
        </mxCell>
        <mxCell id="xfP30E8PO_quScPlo0MI-7" value="监听个数是设置好的，fdarray[]结构体数组的大小而定" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1480" y="1160" width="310" height="30" as="geometry" />
        </mxCell>
        <mxCell id="xfP30E8PO_quScPlo0MI-10" value="" style="endArrow=none;html=1;rounded=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="40" y="2160" as="sourcePoint" />
            <mxPoint x="40" y="2160" as="targetPoint" />
            <Array as="points">
              <mxPoint x="40" y="3720" />
              <mxPoint x="1240" y="3720" />
              <mxPoint x="1240" y="2160" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="WahS84A9gfOQwvpRvCXO-79" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="WahS84A9gfOQwvpRvCXO-80" target="WahS84A9gfOQwvpRvCXO-82">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WahS84A9gfOQwvpRvCXO-80" value="EPOLL" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="540" y="2200" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="WahS84A9gfOQwvpRvCXO-81" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="WahS84A9gfOQwvpRvCXO-82" target="WahS84A9gfOQwvpRvCXO-84">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WahS84A9gfOQwvpRvCXO-82" value="Listenfd建立" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="540" y="2320" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WahS84A9gfOQwvpRvCXO-83" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="WahS84A9gfOQwvpRvCXO-84" target="WahS84A9gfOQwvpRvCXO-86">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WahS84A9gfOQwvpRvCXO-84" value="创建EPOLL套接字" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="540" y="2440" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WahS84A9gfOQwvpRvCXO-85" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="WahS84A9gfOQwvpRvCXO-86" target="WahS84A9gfOQwvpRvCXO-88">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WahS84A9gfOQwvpRvCXO-86" value="将lisenfd添加到epoll套接字，并且设置监听EPOLL类型" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="540" y="2560" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WahS84A9gfOQwvpRvCXO-87" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="WahS84A9gfOQwvpRvCXO-88" target="WahS84A9gfOQwvpRvCXO-96">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="600" y="2840" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WahS84A9gfOQwvpRvCXO-88" value="epoll_wait()阻塞等待监听事件触发" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="540" y="2680" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WahS84A9gfOQwvpRvCXO-89" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="WahS84A9gfOQwvpRvCXO-90" target="WahS84A9gfOQwvpRvCXO-100">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="380" y="2960" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WahS84A9gfOQwvpRvCXO-90" value="EPOLL_IN事件；&lt;br&gt;接收缓冲区有数据，即客户端发来数据了" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="320" y="2840" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WahS84A9gfOQwvpRvCXO-91" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="WahS84A9gfOQwvpRvCXO-92" target="WahS84A9gfOQwvpRvCXO-94">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WahS84A9gfOQwvpRvCXO-92" value="EPOLLOUT事件；&lt;br&gt;有数据需要发送" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="760" y="2840" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WahS84A9gfOQwvpRvCXO-93" value="" style="endArrow=classic;startArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="WahS84A9gfOQwvpRvCXO-90" target="WahS84A9gfOQwvpRvCXO-92">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="480" y="2780" as="sourcePoint" />
            <mxPoint x="980" y="2780" as="targetPoint" />
            <Array as="points">
              <mxPoint x="380" y="2780" />
              <mxPoint x="820" y="2780" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="WahS84A9gfOQwvpRvCXO-94" value="将某些数据调用send或者write将数据发送给对方" style="whiteSpace=wrap;html=1;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="760" y="2960" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WahS84A9gfOQwvpRvCXO-95" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="WahS84A9gfOQwvpRvCXO-96" target="WahS84A9gfOQwvpRvCXO-97">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WahS84A9gfOQwvpRvCXO-96" value="其它EPOLL事件" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="540" y="2840" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WahS84A9gfOQwvpRvCXO-97" value="这里不对其它的EPOLL事件做解析和处理，这里先只管简单的收发" style="whiteSpace=wrap;html=1;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="540" y="2960" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WahS84A9gfOQwvpRvCXO-98" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="WahS84A9gfOQwvpRvCXO-100" target="WahS84A9gfOQwvpRvCXO-102">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WahS84A9gfOQwvpRvCXO-99" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="WahS84A9gfOQwvpRvCXO-100" target="WahS84A9gfOQwvpRvCXO-109">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="380" y="3310" as="targetPoint" />
            <Array as="points">
              <mxPoint x="500" y="3000" />
              <mxPoint x="500" y="3200" />
              <mxPoint x="380" y="3200" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="WahS84A9gfOQwvpRvCXO-100" value="触发的是Listenfd" style="rhombus;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="320" y="2960" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="WahS84A9gfOQwvpRvCXO-101" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="WahS84A9gfOQwvpRvCXO-102">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="600" y="2660" as="targetPoint" />
            <Array as="points">
              <mxPoint x="250" y="3120" />
              <mxPoint x="250" y="2660" />
              <mxPoint x="580" y="2660" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="WahS84A9gfOQwvpRvCXO-102" value="调用Accept得到connfd，connfd增加监听EPOLL类型，然后添加到EPOLL监听事件中&lt;br&gt;" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="320" y="3080" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="WahS84A9gfOQwvpRvCXO-103" value="是" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="395" y="3040" width="40" height="30" as="geometry" />
        </mxCell>
        <mxCell id="WahS84A9gfOQwvpRvCXO-104" value="" style="endArrow=classic;startArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="WahS84A9gfOQwvpRvCXO-106" target="WahS84A9gfOQwvpRvCXO-107">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="240" y="3389" as="sourcePoint" />
            <mxPoint x="520" y="3389" as="targetPoint" />
            <Array as="points">
              <mxPoint x="240" y="3329" />
              <mxPoint x="520" y="3329" />
              <mxPoint x="520" y="3359" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="WahS84A9gfOQwvpRvCXO-105" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="WahS84A9gfOQwvpRvCXO-106" target="WahS84A9gfOQwvpRvCXO-116">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WahS84A9gfOQwvpRvCXO-106" value="read读取到正常信息" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="180" y="3409" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WahS84A9gfOQwvpRvCXO-107" value="read返回-1，即读取出错了" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="460" y="3409" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WahS84A9gfOQwvpRvCXO-108" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="WahS84A9gfOQwvpRvCXO-109" target="WahS84A9gfOQwvpRvCXO-110">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="380" y="3400" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WahS84A9gfOQwvpRvCXO-109" value="调用Read(）去读取内容" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="320" y="3240" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WahS84A9gfOQwvpRvCXO-110" value="read=0，即对端发来关闭信息" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="320" y="3409" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WahS84A9gfOQwvpRvCXO-111" value="" style="endArrow=classic;startArrow=classic;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="WahS84A9gfOQwvpRvCXO-110" target="WahS84A9gfOQwvpRvCXO-107">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="3540" as="sourcePoint" />
            <mxPoint x="460" y="3510" as="targetPoint" />
            <Array as="points">
              <mxPoint x="380" y="3520" />
              <mxPoint x="520" y="3520" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="WahS84A9gfOQwvpRvCXO-112" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" target="WahS84A9gfOQwvpRvCXO-114">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="450" y="3520" as="sourcePoint" />
            <mxPoint x="450" y="3560" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WahS84A9gfOQwvpRvCXO-113" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="WahS84A9gfOQwvpRvCXO-114">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="600" y="2640" as="targetPoint" />
            <Array as="points">
              <mxPoint x="450" y="3650" />
              <mxPoint x="80" y="3650" />
              <mxPoint x="80" y="2640" />
              <mxPoint x="500" y="2640" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="WahS84A9gfOQwvpRvCXO-114" value="close(connfd),然后将该connfd从EPOLL监听里面移出去" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="390" y="3570" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WahS84A9gfOQwvpRvCXO-115" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="WahS84A9gfOQwvpRvCXO-116">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="600" y="2650" as="targetPoint" />
            <Array as="points">
              <mxPoint x="150" y="3565" />
              <mxPoint x="150" y="2650" />
              <mxPoint x="580" y="2650" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="WahS84A9gfOQwvpRvCXO-116" value="发送缓冲区不满就可以触发EPOLLOUT；这里如果读取足够的消息就可以将fd添加到EPOLLOUT；去发送" style="whiteSpace=wrap;html=1;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="180" y="3520" width="120" height="90" as="geometry" />
        </mxCell>
        <mxCell id="WahS84A9gfOQwvpRvCXO-117" value="&lt;div&gt;客户端连接场景&lt;/div&gt;&lt;div&gt;触发条件：客户端connect上服务端后，得到fd，这时候把fd添加到epoll 事件池里面后，因为连接可写，会触发EPOLLOUT事件&lt;/div&gt;&lt;div&gt;客户端发包场景&lt;/div&gt;&lt;div&gt;触发条件：缓冲区从满到不满，会触发EPOLLOUT事件&lt;/div&gt;&lt;div&gt;典型应用场景(数据包发送问题)：&lt;/div&gt;&lt;div&gt;数据包发送逻辑：将数据包发完内核缓冲区–&amp;gt;进而由内核再将缓冲区的内容发送出去；这边send只是做了第一部分的工作，&lt;/div&gt;&lt;div&gt;如果缓存区满的话send将会得到已发送的数据大小(成功放到缓冲区的)，而不是整个数据包大小。&lt;/div&gt;&lt;div&gt;这种情况我们可以借助EPOLLOUT事件加以解决：如果send部分成功，则表示缓存区满了，那么把剩下的部分交给epoll，&lt;/div&gt;&lt;div&gt;当检测到EPOLLOUT事件后，再将剩余的包发送出去。&lt;/div&gt;&lt;div&gt;重新注册EPOLLOUT事件&lt;/div&gt;&lt;div&gt;触发条件：如果当连接可用后，且缓存区不满的情况下，调用epoll_ctl将fd重新注册到epoll事件池(使用EPOLL_CTL_MOD)，&lt;/div&gt;&lt;div&gt;这时也会触发EPOLLOUT时间。&lt;/div&gt;&lt;div&gt;典型应用场景：&lt;/div&gt;&lt;div&gt;send或write发包函数会涉及系统调用，存在一定开销，如果能将数据包聚合起来，&lt;/div&gt;&lt;div&gt;然后调用writev将多个数据包一并发送，则可以减少系统调用次数，提高效率。&lt;/div&gt;&lt;div&gt;这时EPOLLOUT事件就派上用场了：当发包时，可以将先数据包发到数据buffer(用户缓存区)中存放，&lt;/div&gt;&lt;div&gt;然后通过重新注册EPOLLOUT事件，从而触发EPOLLOUT事件时，再将数据包一起通过writev发送出去。&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="540" y="3070" width="690" height="270" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
